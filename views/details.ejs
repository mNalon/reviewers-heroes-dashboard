<!DOCTYPE html>
<html>
  <%- include('head'); %>
  <body>
    <div class="details">
      <header class="details__header">
        <a href="/" class="btn btn--back">←</a>
        <h1 class="details__title">Detalhes do Revisor</h1>
      </header>

      <main class="details__main">
        <section class="details__section">
          <h2 class="details__section-title">MRs atribuídos como revisor</h2>
          <div class="details__table-container">
            <table class="details__table">
              <thead>
                <tr>
                  <th>Título</th>
                  <th>Data de criação</th>
                  <th>Data de atualização</th>
                  <th>Autor</th>
                  <th class="details__table-header--center">Link</th>
                  <th>Tempo estimado (min)</th>
                </tr>
              </thead>
              <tbody>
                <% openedReviewMRs.forEach(function(mr){ %>
                  <tr>
                    <td class="details__table-cell details__table-cell--title" title="<%= mr.title %>">
                      <%= mr.title %>
                    </td>
                    <td class="details__table-cell details__table-cell--date">
                      <%= mr.createdAt ? new Date(mr.createdAt).toLocaleDateString('pt-BR', { day: '2-digit' ,
                        month: '2-digit' , year: 'numeric' }) : '-' %>
                    </td>
                    <td class="details__table-cell details__table-cell--date">
                      <%= mr.updatedAt ? new Date(mr.updatedAt).toLocaleDateString('pt-BR', { day: '2-digit' ,
                        month: '2-digit' , year: 'numeric' }) : '-' %>
                    </td>
                    <td class="details__table-cell">
                      <%= mr.author && mr.author.userName %>
                    </td>
                    <td class="details__table-cell details__table-cell--link">
                      <a href="<%=mr.webUrl%>" class="btn btn--link" target="_blank">Ver MR</a>
                    </td>
                    <td class="details__table-cell details__table-cell--time">
                      <%= mr.timeEstimate ? mr.timeEstimate/60 : 'Não especificado' %>
                    </td>
                  </tr>
                <% }); %>
                  <tr class="details__table-row--total">
                    <td class="details__table-cell"><strong>Total:</strong></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell details__table-cell--total-value">
                      <strong>
                        <%=totalOpenedReviewEstimatedTime%>
                      </strong>
                    </td>
                  </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="details__section">
          <h2 class="details__section-title">MRs abertos (assignee)</h2>
          <div class="details__table-container">
            <table class="details__table">
              <thead>
                <tr>
                  <th>Título</th>
                  <th>Data de criação</th>
                  <th>Data de atualização</th>
                  <th>Revisor</th>
                  <th class="details__table-header--center">Link</th>
                  <th>Tempo estimado (min)</th>
                </tr>
              </thead>
              <tbody>
                <% openedMRs.forEach(function(mr){ %>
                  <tr>
                    <td class="details__table-cell details__table-cell--title" title="<%= mr.title %>">
                      <%= mr.title %>
                    </td>
                    <td class="details__table-cell details__table-cell--date">
                      <%= mr.createdAt ? new Date(mr.createdAt).toLocaleDateString('pt-BR', { day: '2-digit' ,
                        month: '2-digit' , year: 'numeric' }) : '-' %>
                    </td>
                    <td class="details__table-cell details__table-cell--date">
                      <%= mr.updatedAt ? new Date(mr.updatedAt).toLocaleDateString('pt-BR', { day: '2-digit' ,
                        month: '2-digit' , year: 'numeric' }) : '-' %>
                    </td>
                    <td class="details__table-cell">
                      <%= mr.revisor && mr.revisor.userName %>
                    </td>
                    <td class="details__table-cell details__table-cell--link">
                      <a href="<%=mr.webUrl%>" class="btn btn--link" target="_blank">Ver MR</a>
                    </td>
                    <td class="details__table-cell details__table-cell--time">
                      <%= mr.timeEstimate ? mr.timeEstimate/60 : 'Não especificado' %>
                    </td>
                  </tr>
                <% }); %>
                  <tr class="details__table-row--total">
                    <td class="details__table-cell"><strong>Total:</strong></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell details__table-cell--total-value">
                      <strong>
                        <%=totalOpenedEstimatedTime%>
                      </strong>
                    </td>
                  </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section class="details__section">
          <h2 class="details__section-title">MRs revisados e fechados na última semana</h2>
          <div class="details__table-container">
            <table class="details__table">
              <thead>
                <tr>
                  <th>Título</th>
                  <th>Data de criação</th>
                  <th>Autor</th>
                  <th>Mergeado por</th>
                  <th class="details__table-header--center">Link</th>
                  <th>Tempo estimado (min)</th>
                </tr>
              </thead>
              <tbody>
                <% mergedMRs.forEach(function(mr){ %>
                  <tr>
                    <td class="details__table-cell details__table-cell--title" title="<%= mr.title %>">
                      <%= mr.title %>
                    </td>
                    <td class="details__table-cell details__table-cell--date">
                      <%= mr.createdAt ? new Date(mr.createdAt).toLocaleDateString('pt-BR', { day: '2-digit' ,
                        month: '2-digit' , year: 'numeric' }) : '-' %>
                    </td>
                    <td class="details__table-cell">
                      <%= mr.author && mr.author.userName %>
                    </td>
                    <td class="details__table-cell">
                      <%= mr.mergedBy.userName %>
                    </td>
                    <td class="details__table-cell details__table-cell--link">
                      <a href="<%=mr.webUrl%>" class="btn btn--link" target="_blank">Ver MR</a>
                    </td>
                    <td class="details__table-cell details__table-cell--time">
                      <%= mr.timeEstimate ? mr.timeEstimate/60 : 'Não especificado' %>
                    </td>
                  </tr>
                <% }); %>
                  <tr class="details__table-row--total">
                    <td class="details__table-cell"><strong>Total:</strong></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell"></td>
                    <td class="details__table-cell details__table-cell--total-value">
                      <strong>
                        <%=totalMergedEstimatedTime%>
                      </strong>
                    </td>
                  </tr>
              </tbody>
            </table>
          </div>
        </section>
      </main>
    </div>
  </body>

</html>