<!DOCTYPE html>
<html>
<%- include('head'); %>

  <body>
    <div class="hero-container">
      <header class="hero-header">
        <h1 class="hero-title">Reviewers Heroes</h1>
        <div class="view-controls">
          <button class="view-btn active" data-view="grid" title="Visualiza√ß√£o em Grid">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path
                d="M4 4h4v4H4V4zm6 0h4v4h-4V4zm6 0h4v4h-4V4zM4 10h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4zM4 16h4v4H4v-4zm6 0h4v4h-4v-4zm6 0h4v4h-4v-4z" />
            </svg>
          </button>
          <button class="view-btn" data-view="list" title="Visualiza√ß√£o em Lista">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
              <path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z" />
            </svg>
          </button>
        </div>
      </header>

      <main class="hero-main">
        <div class="reviewers-grid">
          <% users.forEach(function(user, index){ %>
            <div class="reviewer-card <%= user.totalReviews >= dangerLimitReviews ? 'danger' : '' %>">
              <div class="reviewer-info">
                <div class="reviewer-avatar">
                  <img src="<%=user.avatarUrl%>" alt="<%=user.userName%>">
                </div>
                <div class="reviewer-details">
                  <h2 class="reviewer-name">
                    <%= user.userName %>
                  </h2>
                  <div class="reviewer-stats">
                    <div class="stat-item">
                      <span class="stat-icon">üèÜ</span>
                      <span class="stat-value">
                        <%= user.totalReviews %>
                      </span>
                      <span class="stat-label">reviews</span>
                    </div>
                    <div class="stat-item">
                      <span class="stat-icon">üë•</span>
                      <span class="stat-value">
                        <%= user.totalAssignees %>
                      </span>
                      <span class="stat-label">assignees</span>
                    </div>
                  </div>
                </div>
              </div>
              <div class="reviewer-actions">
                <a href="/details/<%=user.id%>" class="details-btn">Detalhes</a>
              </div>
            </div>
            <% }); %>
        </div>

        <!-- Visualiza√ß√£o em Lista -->
        <div class="reviewers-list" style="display: none;">
          <table class="reviewers-table">
            <thead>
              <tr>
                <th>Revisor</th>
                <th>Reviews</th>
                <th>Assignees</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody>
              <% users.forEach(function(user, index){ %>
                <tr class="reviewer-row <%= user.totalReviews >= dangerLimitReviews ? 'danger' : '' %>">
                  <td class="reviewer-info-cell">
                    <div class="reviewer-avatar-small">
                      <img src="<%=user.avatarUrl%>" alt="<%=user.userName%>">
                    </div>
                    <span class="reviewer-name-list">
                      <%=user.userName%>
                    </span>
                  </td>
                  <td class="stat-cell">
                    <span class="stat-value-list">
                      <%=user.totalReviews%>
                    </span>
                  </td>
                  <td class="stat-cell">
                    <span class="stat-value-list">
                      <%=user.totalAssignees%>
                    </span>
                  </td>
                  <td class="actions-cell">
                    <a href="/details/<%=user.id%>" class="details-btn-small">Detalhes</a>
                  </td>
                </tr>
                <% }); %>
            </tbody>
          </table>
        </div>
      </main>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const viewButtons = document.querySelectorAll('.view-btn');
        const gridView = document.querySelector('.reviewers-grid');
        const listView = document.querySelector('.reviewers-list');

        viewButtons.forEach(button => {
          button.addEventListener('click', function () {
            const view = this.dataset.view;

            // Remover classe active de todos os bot√µes
            viewButtons.forEach(btn => btn.classList.remove('active'));

            // Adicionar classe active ao bot√£o clicado
            this.classList.add('active');

            // Alternar visualiza√ß√µes
            if (view === 'grid') {
              gridView.style.display = 'grid';
              listView.style.display = 'none';
            } else {
              gridView.style.display = 'none';
              listView.style.display = 'block';
            }

            // Salvar prefer√™ncia no localStorage
            localStorage.setItem('viewMode', view);
          });
        });

        // Carregar prefer√™ncia salva
        const savedView = localStorage.getItem('viewMode') || 'grid';
        const targetButton = document.querySelector(`[data-view="${savedView}"]`);
        if (targetButton) {
          targetButton.click();
        }
      });
    </script>
  </body>

</html>